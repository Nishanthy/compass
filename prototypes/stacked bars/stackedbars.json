{
	"name": "stacked bars",
	"width": 500,
	"height": 200,
	"padding": {"top": 10, "left": 30, "right": 30, "bottom": 30},
	"data": [
	{
		"name": "table",
		"values": [
		{"x": 1, "y": 1, "color": "#d62728"},
		{"x": 2, "y": 2, "color": "#d62728"},
		{"x": 3, "y": 3, "color": "#d62728"},
		{"x": 4, "y": 4, "color": "#d62728"},
		{"x": 5, "y": 5, "color": "#d62728"},
		{"x": 6, "y": 6, "color": "#d62728"},
		{"x": 7, "y": 7, "color": "#d62728"},
		{"x": 1, "y": 7, "color": "#1f77b4"},
		{"x": 2, "y": 6, "color": "#1f77b4"},
		{"x": 3, "y": 5, "color": "#1f77b4"},
		{"x": 4, "y": 4, "color": "#1f77b4"},
		{"x": 5, "y": 3, "color": "#1f77b4"},
		{"x": 6, "y": 2, "color": "#1f77b4"},
		{"x": 7, "y": 1, "color": "#1f77b4"}
		]
	},
	{
		"name": "stats",
		"source": "table",
		"transform": [
		{"type": "facet", "keys": ["data.x"]},
		{"type": "stats", "value": "data.y"}
		]
	}
	],
	"scales": [
	{
		"name": "x",
		"type": "ordinal",
		"range": "width", 
		"domain": {"data": "table", "field": "data.x"}
	},
	{
		"name": "y",
		"type": "linear",
		"range": "height",
		"domain": {"data": "stats", "field": "sum"}
	}
	],
	"axes": [
	{"type": "x", "scale": "x"},
	{"type": "y", "scale": "y"}
	],
	"marks": [
	{
		"type": "group",
		"from": {
			"data": "table", 
			"transform": [
			{"type": "facet", "keys": ["data.color"]},
			{"type": "stack", "point": "data.x", "height": "data.y"}
			]
		},
		"marks": [{
			"type": "rect",
			"properties": {
				"enter": {
					"x": {"scale": "x", "field": "data.x"},
					"width": {"scale": "x", "band": true, "offset": -1},
					"y": {"scale": "y", "field": "y"},
					"y2": {"scale": "y", "field": "y2"},
					"fill": {"field": "data.color"}
				}
			}
		}]
	}
	]
}





